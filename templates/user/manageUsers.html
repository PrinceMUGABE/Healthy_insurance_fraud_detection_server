{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Users</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
   <link rel="stylesheet" type="text/css" href="{% static 'css/manageUsers.css' %}">
</head>
<body>
   <!-- Left Sidebar -->
   <div id="sidebarCollapse">
       <i class="fas fa-bars text-dark"></i>
   </div>
   <div id="sidebar" class="bg-dark vh-100 p-3">
       <!-- Sidebar content -->
       <div class="d-flex align-items-center mb-4">
           <i class="fas fa-hospital text-white me-2"></i>
           <span class="text-white">Health Insurance Fraud Detection</span>
       </div>
       <div class="nav flex-column nav-pills">
           <!-- Navigation links -->
           <a class="nav-link text-white my-5" href="/user/admin_dashboard/">Dashboard</a>
           <div class="nav-item dropdown my-5">
               <a class="nav-link text-white dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                   People
               </a>
               <ul class="dropdown-menu bg-dark">
                   <li><a class="dropdown-item text-white" id="userListLink" href="/user/users/">Users</a></li>
                   <li><a class="dropdown-item text-white" href="/prediction/predictions/">Patients</a></li>
                   <li><a class="dropdown-item text-white" href="/employee/employees/">Employee</a></li>
               </ul>
           </div>
           <div class="nav-item dropdown my-5">
               <a class="nav-link text-white dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                   Insurance
               </a>
               <ul class="dropdown-menu bg-dark">
                   <li><a class="nav-link text-white my-5 py-5" href="/insurance/insurances/">Insurances</a></li>
                   <li><a class="nav-link text-white my-5 py-5" href="/client/clients/">Insurance Members</a></li>
               </ul>
           </div>
           <div class="mt-auto my-5">
               <a class="nav-link text-white" href="{% url 'logout' %}">Logout</a>
           </div>
       </div>
   </div>
   <!-- End Left Sidebar -->

   <!-- Main Content -->

       <!-- Main Content -->
    <div class="main-content">
       <h1 class="text-center mb-5 py-5">Manage Users</h1>

       <!-- Table of Insurances -->
       <div class="table-container">
           <table class="table table-striped" id="tbl">
                   <!-- Table headers -->
                   <thead>
                       <tr>
                           <th>ID</th>
                           <th>Username</th>
                           <th>Email</th>
                           <th>Role</th>
                           <th>Created Date</th>
                           <th>Action</th>
                       </tr>
                   </thead>
                   <!-- Table body -->
                   <tbody>
                       <!-- Loop through users data -->
                       {% for user in users %}
                       <tr>
                           <td>{{ user.id }}</td>
                           <td>{{ user.username }}</td>
                           <td>{{ user.email }}</td>
                           <td>{{ user.role }}</td>
                           <td>{{ user.created_date }}</td>
                           <td>
                               <button class="btn btn-primary btn-sm edit-user-btn" data-user-id="{{ user.id }}">Edit</button>
                               <button class="btn btn-danger btn-sm">Delete</button>
                           </td>
                       </tr>
                       {% endfor %}
                   </tbody>
               </table>
       </div>
   </div>
   <!-- End Main Content -->

   <!-- End Main Content -->

   <div class="main-content">
       <!-- Today's Users Section -->
        <div class="today-users">
            <h3 class="text-dark">Today's Users</h3>
            <ul class="today-users-list">
                <!-- Display today's users here -->
                {% for user in today_users %}
                <li>{{ user.username }} - {{ user.email }}</li>
                {% empty %}
                <li>No users signed up today</li>
                {% endfor %}
            </ul>
        </div>
        <!-- End Today's Users Section -->


   <!-- Edit User Modal -->
   <div id="editUserModal" class="modal">
       <div class="modal-content">
           <span class="close">&times;</span>
           <div class="card">
               <div class="card-body">
                   <h5 class="card-title">Edit User</h5>
                   <form id="editUserForm" action="" method="post">
                       <input type="hidden" id="userId" name="userId">
                       <div class="mb-3">
                           <label for="editUsername" class="form-label">Username:</label>
                           <input type="text" id="editUsername" name="editUsername" class="form-control">
                       </div>
                       <div class="mb-3">
                           <label for="editEmail" class="form-label">Email:</label>
                           <input type="email" id="editEmail" name="editEmail" class="form-control">
                       </div>
                       <div class="mb-3">
                           <label for="role" class="form-label">Role</label>
                           <select class="form-select" id="role" name="role">
                               <option value="admin">Admin</option>
                               <option value="doctor">Doctor</option>
                               <option value="investigator">Investigator</option>
                           </select>
                       </div>
                       <button type="submit" class="btn btn-primary">Save Changes</button>
                   </form>
               </div>
           </div>
       </div>
   </div>
   <!-- End Edit User Modal -->

   <!-- Scripts -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
   <script src="{% static 'js/manageUsers.js' %}"></script>
</body>
</html>